# üöÄ Deployment –Ω–∞ TimeWeb Cloud

## –ü–æ—á–µ–º—É TimeWeb –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö–æ—Ä–æ—à–∏–º –≤—ã–±–æ—Ä–æ–º:

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è Trenergram:
1. **–†–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥** - –Ω–∏–∑–∫–∏–π –ø–∏–Ω–≥ –¥–ª—è –†–§ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
2. **–û–ø–ª–∞—Ç–∞ –≤ —Ä—É–±–ª—è—Ö** - –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç—ã
3. **App Platform** - –µ—Å—Ç—å PaaS —Å GitHub –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
4. **–î–µ—à–µ–≤–ª–µ** - –æ—Ç 200‚ÇΩ/–º–µ—Å –∑–∞ VPS
5. **PostgreSQL + Redis** - –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ managed —Å–µ—Ä–≤–∏—Å—ã

### ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- –ú–µ–Ω—å—à–µ –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —á–µ–º —É –∑–∞–ø–∞–¥–Ω—ã—Ö
- –ù–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ (–Ω–æ –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–∏–æ–¥)

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è Trenergram –Ω–∞ TimeWeb:

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)
```
S1 —Ç–∞—Ä–∏—Ñ (–Ω–∞—á–∞–ª—å–Ω—ã–π):
- 1 vCPU
- 1 GB RAM
- 10 GB SSD
- 200‚ÇΩ/–º–µ—Å

M2 —Ç–∞—Ä–∏—Ñ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π):
- 2 vCPU
- 4 GB RAM
- 30 GB SSD
- 590‚ÇΩ/–º–µ—Å
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: App Platform (PaaS)
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ GitHub ‚úÖ
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚úÖ
- –û—Ç 300‚ÇΩ/–º–µ—Å

PostgreSQL:
- 1 GB RAM
- 10 GB SSD
- –û—Ç 590‚ÇΩ/–º–µ—Å

Redis:
- 512 MB RAM
- –û—Ç 300‚ÇΩ/–º–µ—Å

–ò—Ç–æ–≥–æ: ~1200‚ÇΩ/–º–µ—Å (‚âà$15)
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ–ø–ª–æ—è –Ω–∞ TimeWeb

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ App Platform –ø—Ä–æ–µ–∫—Ç–∞

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ timeweb.cloud
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "App Platform"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
4. –í—ã–±–µ—Ä–∏—Ç–µ "GitHub" –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```yaml
# timeweb.yaml - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è App Platform
name: trenergram

services:
  - name: api
    github:
      repo: Bulllgakov/trenergram
      branch: main
      auto_deploy: true
    build:
      dockerfile: Dockerfile
    env:
      - key: DATABASE_URL
        value: ${DATABASE_URL}
      - key: BOT_TOKEN
        value: ${BOT_TOKEN}
    port: 8000
    health_check:
      path: /health

  - name: bot
    github:
      repo: Bulllgakov/trenergram
      branch: main
    run: python backend/app/bot/main.py
    env:
      - key: BOT_TOKEN
        value: ${BOT_TOKEN}

databases:
  - name: postgres
    type: postgresql
    version: 14
    size: small

  - name: redis
    type: redis
    version: 7
    size: small
```

### –®–∞–≥ 3: Dockerfile –¥–ª—è TimeWeb

```dockerfile
FROM python:3.10-slim

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN apt-get update && apt-get install -y \
    gcc \
    postgresql-client \
    && rm -rf /var/lib/apt/lists/*

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . .

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONUNBUFFERED=1
ENV PORT=8000

# –ó–∞–ø—É—Å–∫
CMD ["sh", "-c", "uvicorn backend.app.main:app --host 0.0.0.0 --port ${PORT}"]
```

### –®–∞–≥ 4: GitHub Actions –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

```yaml
# .github/workflows/timeweb-deploy.yml
name: Deploy to TimeWeb

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Deploy to TimeWeb
      env:
        TIMEWEB_API_TOKEN: ${{ secrets.TIMEWEB_API_TOKEN }}
      run: |
        curl -X POST \
          -H "Authorization: Bearer ${TIMEWEB_API_TOKEN}" \
          -H "Content-Type: application/json" \
          -d '{"branch": "main"}' \
          https://api.timeweb.cloud/api/v1/apps/${APP_ID}/deploy
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –Ω–∞ TimeWeb
psql postgresql://user:password@your-db.timeweb.cloud:5432/trenergram

# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
python backend/init_db.py
```

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ TimeWeb vs Railway vs DigitalOcean:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | TimeWeb | Railway | DigitalOcean |
|----------|---------|---------|--------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç–∞—Ä—Ç–∞** | 1200‚ÇΩ ($15) | $5-20 | $20-30 |
| **GitHub –¥–µ–ø–ª–æ–π** | ‚úÖ –ï—Å—Ç—å | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ |
| **PostgreSQL** | ‚úÖ 590‚ÇΩ/–º–µ—Å | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | ‚úÖ $15/–º–µ—Å |
| **Redis** | ‚úÖ 300‚ÇΩ/–º–µ—Å | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | ‚úÖ $15/–º–µ—Å |
| **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥** | 10 –¥–Ω–µ–π | $5/–º–µ—Å | $200/60–¥–Ω–µ–π |
| **–ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ö†Ô∏è –í—Ä—É—á–Ω—É—é | ‚úÖ –ê–≤—Ç–æ | ‚úÖ –ê–≤—Ç–æ |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** | üá∑üá∫ –†—É—Å—Å–∫–∞—è | üá¨üáß –ê–Ω–≥–ª | üá¨üáß –ê–Ω–≥–ª |
| **–î–ª—è –†–§ –∞—É–¥–∏—Ç–æ—Ä–∏–∏** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è Trenergram:

### –í—ã–±–µ—Ä–∏—Ç–µ TimeWeb –µ—Å–ª–∏:
‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –≤ –†–æ—Å—Å–∏–∏/–°–ù–ì
‚úÖ –í–∞–∂–Ω–∞ –æ–ø–ª–∞—Ç–∞ –≤ —Ä—É–±–ª—è—Ö
‚úÖ –ù—É–∂–Ω–∞ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚úÖ –ì–æ—Ç–æ–≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –í—ã–±–µ—Ä–∏—Ç–µ Railway –µ—Å–ª–∏:
‚úÖ –ù—É–∂–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚úÖ –í–∞–∂–µ–Ω –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞
‚úÖ –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
‚úÖ –ú–∏–Ω–∏–º—É–º –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è TimeWeb:

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ timeweb.cloud
# 2. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ 1200‚ÇΩ
# 3. –°–æ–∑–¥–∞–π—Ç–µ App Platform –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```
DATABASE_URL=postgresql://user:pass@postgres.timeweb.cloud/trenergram
REDIS_URL=redis://redis.timeweb.cloud:6379
BOT_TOKEN=8229544461:AAFr-MA466IKP_egh448meK6LLKWEZagofI
SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á
```

### 3. –î–µ–ø–ª–æ–π
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –ø–∞–Ω–µ–ª–∏ TimeWeb
# –ù–∞–∂–º–∏—Ç–µ "Deploy"
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

## üí° –°–æ–≤–µ—Ç—ã –ø–æ TimeWeb:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Platform** –≤–º–µ—Å—Ç–æ –≥–æ–ª–æ–≥–æ VPS - –ø—Ä–æ—â–µ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–±–µ–∫–∞–ø—ã** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. **–í–∫–ª—é—á–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN** –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - TimeWeb VPS:

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –≤–æ–∑—å–º–∏—Ç–µ VPS –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Å—ë –≤—Ä—É—á–Ω—É—é:

```bash
# –ù–∞ VPS TimeWeb
apt update && apt upgrade -y
apt install python3-pip postgresql redis nginx certbot

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/Bulllgakov/trenergram.git
cd trenergram

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip3 install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ systemd —Å–µ—Ä–≤–∏—Å—ã
# ... –¥–∞–ª–µ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TimeWeb:

- –¢–µ–ª–µ—Ñ–æ–Ω: 8 (800) 333-19-68 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø–æ –†–§)
- Telegram: @timeweb_support
- Email: support@timeweb.ru
- –ß–∞—Ç –Ω–∞ —Å–∞–π—Ç–µ 24/7