# –ü–∞–º—è—Ç–∫–∞ –¥–ª—è Claude –æ –ø—Ä–æ–µ–∫—Ç–µ Trenergram

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –î–ï–ü–õ–û–ô
**–î–ï–ü–õ–û–ô –¢–û–õ–¨–ö–û –ß–ï–†–ï–ó GITHUB ACTIONS!**
- –ü—Ä–∏ `git push origin main` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–µ–ø–ª–æ–π
- –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ SSH
- –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: Docker Compose –≤ `/opt/trenergram/`
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –¥–µ–ª–∞–π —á–µ—Ä–µ–∑ –∫–æ–º–º–∏—Ç –∏ push

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL (–í–ê–ñ–ù–û!)

### –ü—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç (–æ–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä)
- **trenergram.ru/** - –ì–ª–∞–≤–Ω–∞—è –≤–µ–±-–≤–∏—Ç—Ä–∏–Ω–∞
- **trenergram.ru/trainers** - –õ–µ–Ω–¥–∏–Ω–≥ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤ (–≤—Ä–µ–º–µ–Ω–Ω–æ, —Å—Ç–∞–Ω–µ—Ç –∫–∞—Ç–∞–ª–æ–≥–æ–º)
- **trenergram.ru/clubs** - –õ–µ–Ω–¥–∏–Ω–≥ –¥–ª—è –∫–ª—É–±–æ–≤ (–≤—Ä–µ–º–µ–Ω–Ω–æ, —Å—Ç–∞–Ω–µ—Ç –∫–∞—Ç–∞–ª–æ–≥–æ–º)
- **trenergram.ru/admin/** - –ï–¥–∏–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
  - –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ —Ä–æ–ª—è–º: super_admin, club_admin, club_owner
  - –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç –≤—Å–µ –∫–ª—É–±—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã - —Ç–æ–ª—å–∫–æ —Å–≤–æ–π

### Mini Apps (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞)
- **trenergram.ru/trainer/:id** - Mini App —Ç—Ä–µ–Ω–µ—Ä–∞
- **trenergram.ru/client/:id** - Mini App –∫–ª–∏–µ–Ω—Ç–∞

### API
- **trenergram.ru/api/** - Backend API

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–í–ê–ñ–ù–û!)

### üåê –ü—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç + –ê–¥–º–∏–Ω–∫–∞ (`public/`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ã—á–Ω—ã–µ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- **–õ–æ–∫–∞–ª—å–Ω–æ:** `/Users/bulat/trenergram/public/`
- **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/var/www/trenergram/public/`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** JWT (email/password) –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
  - `index.html` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - `trainers.html` - –ª–µ–Ω–¥–∏–Ω–≥ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–æ–≤ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - `clubs.html` - –ª–µ–Ω–¥–∏–Ω–≥ –¥–ª—è –∫–ª—É–±–æ–≤ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - `admin/` - –µ–¥–∏–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞)
    - `admin/index.html` - –≥–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω–∫–∏
    - `admin/login.html` - –≤—Ö–æ–¥ (email/password)
    - `admin/dashboard.html` - –¥–∞—à–±–æ—Ä–¥
    - `admin/clubs.html` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—É–±–∞–º–∏ (super_admin)
    - `admin/trainers.html` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–µ—Ä–∞–º–∏
    - `admin/clients.html` - CRM –∫–ª–∏–µ–Ω—Ç—ã
    - `admin/js/`, `admin/css/` - —Ä–µ—Å—É—Ä—Å—ã
  - `css/`, `js/`, `img/` - –æ–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã

### üì± Telegram Mini Apps (`webapp/`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–û–õ–¨–ö–û Telegram Mini Apps (–¥–æ—Å—Ç—É–ø–Ω—ã –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ –±–æ—Ç–∞)
- **–õ–æ–∫–∞–ª—å–Ω–æ:** `/Users/bulat/trenergram/webapp/`
- **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/var/www/trenergram/webapp/`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Telegram WebApp initData
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
  - `webapp/trainer/` - Mini App —Ç—Ä–µ–Ω–µ—Ä–∞ (HTML/JS/CSS)
  - `webapp/client/` - Mini App –∫–ª–∏–µ–Ω—Ç–∞ (HTML/JS/CSS)
- **URL:** `trenergram.ru/trainer/:id` –∏ `trenergram.ru/client/:id`
- **–î–æ—Å—Ç—É–ø:** —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞, –ù–ï –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

## –°–µ—Ä–≤–µ—Ä
- IP: 81.200.157.102
- –î–æ–º–µ–Ω: trenergram.ru
- SSH: root@81.200.157.102 (–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –¥–ª—è –¥–µ–ø–ª–æ—è!)
- –ü—Ä–æ–µ–∫—Ç: /opt/trenergram (Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
- **–í–ê–ñ–ù–û: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
  - `/var/www/trenergram/public/` - –ü—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç (nginx)
  - `/var/www/trenergram/webapp/` - Mini Apps (nginx)
  - `/opt/trenergram/` - Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏
  - `/opt/trenergram/backend/` - Backend API (Docker)
- **–í–ê–ñ–ù–û: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è!**
- SSL —Ä–∞–±–æ—Ç–∞–µ—Ç (HTTPS)

## –î–µ–ø–ª–æ–π
- **–¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ GitHub Actions!**
- Workflow: .github/workflows/deploy-vds.yml (–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô —Ä–∞–±–æ—á–∏–π workflow)
- –ü—Ä–∏ push –≤ main –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  1. –û—á–∏—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  2. –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ —á–µ—Ä–µ–∑ git pull
  3. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  4. –û–±–Ω–æ–≤–ª—è–µ—Ç frontend
  5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- PostgreSQL –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- Redis –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- Backend –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- Bot –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –í—Å–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ docker-compose.yml

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º:** —Å–º. —Ä–∞–∑–¥–µ–ª 10.6 –≤ `docs/trenergram-tz-v2.md`
- **–§–∞–π–ª —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** `backend/services/notifications.py`
- **–õ–æ–≥–∏–∫–∞:** —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ç—Ä–µ–Ω–µ—Ä/–∫–ª–∏–µ–Ω—Ç
- **–ü—Ä–∏–Ω—Ü–∏–ø:** —Ç—Ä–µ–Ω–µ—Ä –ù–ï –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å–∞–º–∏–º —Å–æ–±–æ–π
- **–ü–µ—Ä–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ** = –ø–µ—Ä–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É

## –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ (Timezones)
- **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –¢—Ä–µ–Ω–µ—Ä –∏–º–µ–µ—Ç timezone, –∫–ª–∏–µ–Ω—Ç –ù–ï –∏–º–µ–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç timezone —Ç—Ä–µ–Ω–µ—Ä–∞)
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** —Å–º. —Ä–∞–∑–¥–µ–ª –ø–æ—Å–ª–µ 10.6 –≤ `docs/trenergram-tz-v2.md`
- **–í–∞–∂–Ω–æ:**
  - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **timezone —Ç—Ä–µ–Ω–µ—Ä–∞**
  - –ö–ª–∏–µ–Ω—Ç **–∂–µ—Å—Ç–∫–æ** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç timezone —Ç—Ä–µ–Ω–µ—Ä–∞ (–Ω–µ —Å–≤–æ–π –º–µ—Å—Ç–Ω—ã–π)
  - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `trainer_timezone` –≤–æ –≤—Å–µ—Ö booking responses
  - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ timezone —Ç—Ä–µ–Ω–µ—Ä–∞ (`reminder_1_time = "20:00"` –æ–∑–Ω–∞—á–∞–µ—Ç 20:00 –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–µ–Ω–µ—Ä–∞)
- **–§–∞–π–ª—ã:**
  - `backend/models/user.py` - –ø–æ–ª–µ `timezone` (default: "Europe/Moscow")
  - `backend/tasks/reminders.py` - —É—á–µ—Ç timezone –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
  - `backend/migrations/add_trainer_timezone.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- **–°—Ç–∞—Ç—É—Å:** Backend ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, Frontend üöß –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
curl http://trenergram.ru/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Mini App
curl http://trenergram.ru/trainer/

# –°—Ç–∞—Ç—É—Å GitHub Actions
gh run list --limit 1
```

## –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Backend API
‚úÖ Telegram Bot
‚úÖ Mini App –Ω–∞ /trainer/:id –∏ /client/:id
‚úÖ PostgreSQL –∏ Redis
‚úÖ CI/CD —á–µ—Ä–µ–∑ GitHub Actions
‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç (trenergram.ru, /clubs, /trainers)

## –ß—Ç–æ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
üöß –ï–¥–∏–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ –≤ `public/admin/` (—Å —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø—Ä–∞–≤)
üöß API –¥–ª—è –∫–ª—É–±–æ–≤
üöß –ö–∞—Ç–∞–ª–æ–≥–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –∏ –∫–ª—É–±–æ–≤ (–∑–∞–º–µ–Ω—è—Ç –ª–µ–Ω–¥–∏–Ω–≥–∏)

## ‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê –ò–ó–û–õ–Ø–¶–ò–ò –ê–î–ú–ò–ù–ö–ò –û–¢ MINI APPS

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∞–¥–º–∏–Ω–∫–∏ –ù–ï –¢–†–û–ì–ê–¢–¨:

### ‚ùå –ù–ï –¢–†–û–ì–ê–¢–¨ (—ç—Ç–æ –¥–ª—è Mini Apps):
- `backend/models/user.py` - —Å—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏ Trainer, Client
- `backend/models/booking.py` - —Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å Booking
- `backend/api/v1/` - API –¥–ª—è Mini Apps
- `webapp/trainer/` –∏ `webapp/client/` - Mini Apps
- nginx —Å–µ–∫—Ü–∏–∏ `/trainer/` –∏ `/client/`
- **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã —Å—Ç–∞—Ä—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ `models/__init__.py`**

### ‚úÖ –ú–û–ñ–ù–û –ú–ï–ù–Ø–¢–¨ (—ç—Ç–æ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏):
- `backend/models/admin.py` - –∞–¥–º–∏–Ω—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ!)
- `backend/api/admin/` - API –∞–¥–º–∏–Ω–∫–∏
- `public/admin/` - frontend –∞–¥–º–∏–Ω–∫–∏
- –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (`club_admins`, `club_payments`, –∏ —Ç.–¥.)

### üìã Checklist –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º:
1. –ù–µ —Ç—Ä–æ–≥–∞–ª `models/user.py` –∏–ª–∏ `models/booking.py`?
2. –ù–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª –∏–º–ø–æ—Ä—Ç—ã –≤ `models/__init__.py`?
3. –ù–µ –º–µ–Ω—è–ª `api/v1/` endpoints?
4. –ù–µ –º–µ–Ω—è–ª nginx —Å–µ–∫—Ü–∏–∏ –¥–ª—è Mini Apps?

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. `ISOLATION_RULES.md`

**–ê–≤—Ç–æ—Ç–µ—Å—Ç—ã:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è Mini Apps

---
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 18.11.2025*